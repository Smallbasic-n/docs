---
title: "手動でのアップグレード"
weight: 10
---

K3s をアップグレードするには、インストール スクリプトを使用するか、目的のバージョンのバイナリを手動でインストールします。

:::note
アップグレードするときは、最初にサーバー ノードを 1 つずつアップグレードし、次にエージェント ノードをアップグレードします。
:::

### リリースチャンネル

インストール スクリプトまたは [automated upgrades](automated.md) 機能を使用して実行されるアップグレードは、さまざまなリリース チャネルに関連付けることができます。 次のチャネルが利用可能です。

| チャンネル | 説明 |
|---|---------------------|
| 安定 | (デフォルト) 本番環境には安定版が推奨されます。 これらのリリースは、コミュニティ強化の期間を経ています。 | |
| 最新 | 最新の機能を試すには、Latest をお勧めします。 これらのリリースは、コミュニティ強化の期間をまだ経ていません。 | |
| v1.26 (例)| サポート終了のバージョンを含む、各 Kubernetes マイナー バージョンに関連付けられたリリース チャネルがあります。 これらのチャネルは、必ずしも安定したリリースではなく、利用可能な最新のパッチを選択します。 | |

チャネルの完全な最新リストについては、[k3s チャネル サービス API](https://update.k3s.io/v1-release/channels) にアクセスしてください。 チャネルの仕組みに関する技術的な詳細については、[channelserver プロジェクト](https://github.com/rancher/channelserver) を参照してください。

### インストール スクリプトを使用して K3 をアップグレードする

K3s を古いバージョンからアップグレードするには、同じフラグを使用してインストール スクリプトを再実行できます。次に例を示します。
```sh
curl -sfL https://get.k3s.io | sh -
```
これにより、デフォルトで安定版チャンネルの新しいバージョンにアップグレードされます。

特定のチャネル (最新など) で新しいバージョンにアップグレードする場合は、チャネルを指定できます。
```sh
curl -sfL https://get.k3s.io | INSTALL_K3S_CHANNEL=latest sh -
```

特定のバージョンにアップグレードする場合は、次のコマンドを実行できます。
```sh
curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=vX.Y.Z-rc1 sh -
```

### バイナリを使用して K3 を手動でアップグレードする

または、K3 を手動でアップグレードするには:

1. [リリース](https://github.com/k3s-io/k3s/releases) から目的のバージョンの K3s バイナリをダウンロードします。
2. ダウンロードしたバイナリを /usr/local/bin/k3s (または任意の場所) にコピーします。
3. 古い k3s バイナリを停止します
4. 新しい k3s バイナリを起動します

### K3 の再起動

K3s の再起動は、systemd および OpenRC のインストール スクリプトでサポートされています。

**systemd**

サーバーを手動で再起動するには:
```sh
sudo systemctl restart k3s
```

エージェントを手動で再起動するには:
```sh
sudo systemctl restart k3s-agent
```

**OpenRC**

サーバーを手動で再起動するには:
```sh
sudo service k3s restart
```

エージェントを手動で再起動するには:
```sh
sudo service k3s-agent restart
```
